<div *ngIf="!gameStatus">
  <br>
  <br>
  <br>
  <app-loader></app-loader>
</div>

<div *ngIf="gameStatus" class="play-container">

  <div class="game-container">
    <div class="wrapper">

      <div class="text-center turn-info">

        <div *ngIf="isGameOver()">
          <div *ngIf="amITheWinner()" class="green" i18n="@@play.win">You win!</div>
          <div *ngIf="!amITheWinner()" class="red" i18n="@@play.lose">You lose</div>
          <div class="turn-info-details">&nbsp;</div>
        </div>
        <div *ngIf="!isGameOver()">
          <div *ngIf="isMyTurn()" class="green">
            <div i18n="@@play.your_turn">Your turn!</div>
            <div class="turn-info-details">
              <ng-container *ngIf="amICatsPlayer()" i18n="@@play.cat_turn_info">
                select a cat and then move it
              </ng-container>
              <ng-container *ngIf="!amICatsPlayer()" i18n="@@play.mouse_turn_info">
                move the mouse piece
              </ng-container>
            </div>
          </div>
          <div *ngIf="!isMyTurn()" class="red">
            <div i18n="@@play.their_turn">Their turn</div>
            <div class="turn-info-details" >{{getEnemyPlayer().name}} <span i18n="@@play.is_thinking">is thinking...</span></div>
          </div>
        </div>

      </div>
    </div>


    <div class="game-board">

      <ng-container *ngFor="let rowIndex of [0,1,2,3,4,5,6,7]">
        <app-chess-box *ngFor="let columnIndex of [0,1,2,3,4,5,6,7]" [chessBox]="chessBoard[rowIndex][columnIndex]"
          [chessBoxCurrentlySelected]="chessBoxCurrentlySelected" (click)="onChessBoxClicked(rowIndex,columnIndex)">
        </app-chess-box>
      </ng-container>

    </div>

  </div>

  <div class="options-container">

      <div class="options-buttons">
        <button mat-button (click)=openHowToPlayDialog()><i class="far fa-question-circle"></i>&nbsp;<span i18n="@@play.how_to_play">how to play</span></button>

        <button *ngIf="isRematchButtonVisible()" [disabled]="!isRematchButtonEnabled()" mat-raised-button class="success-button" (click)=sendRematchRequest()>
          <i class="fas fa-redo"></i>&nbsp;
          <span *ngIf="isRematchButtonEnabled()" i18n="@@play.rematch">rematch</span>
          <span *ngIf="!isRematchButtonEnabled()" i18n="@@play.rematch_awaiting">awaiting</span>
        </button>

        <button *ngIf="!isGameOver()" mat-button color="warn" (click)=tryExitGame()><i class="fas fa-sign-out-alt"></i>&nbsp;<span i18n="@@play.exit_game">exit game</span></button>
        <button *ngIf="isGameOver()" mat-raised-button color="warn" (click)=tryExitGame()><i class="fas fa-sign-out-alt"></i>&nbsp;<span i18n="@@play.exit_game">exit game</span></button>
      </div>

      <app-chat [gameId]=gameStatus.gameId [canSendMessages]=!hasAnyPlayerLeft()></app-chat>
    
  </div>



</div>